(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{64:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"model-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-api"}},[t._v("#")]),t._v(" Model API")]),t._v(" "),s("h2",{attrs:{id:"constructor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#constructor"}},[t._v("#")]),t._v(" Constructor")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("new Model( uuid, options )")])]),t._v(" "),s("p",[t._v("The constructor is creating an instance of any defined model at runtime to represent the related item. It is invoked with up to two arguments:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("The "),s("strong",[t._v("uuid")]),t._v(" is uniquely addressing a record in attached data storage to be represented by this instance. It might be omitted on creating new item. In this case a UUID is assigned on saving this item for the first time.")])]),t._v(" "),s("li",[s("p",[t._v("The "),s("strong",[t._v("options")]),t._v(" object consists of several properties customizing the resulting item's behaviour:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("The property "),s("strong",[t._v("adapter")]),t._v(" may be given to choose a "),s("router-link",{attrs:{to:"/api/adapter.html"}},[t._v("custom adapter")]),t._v(" for use with created instance. The adapter is used to interact with a persistent data storage such as the file system or any other supported kind of database.")],1)]),t._v(" "),s("li",[s("p",[t._v("The property "),s("strong",[t._v("onUnsaved")]),t._v(" selects mode for handling multiple consecutive assignments to a single property without saving intermittently. See the "),s("a",{attrs:{href:"#model-onunsaved"}},[t._v("description of "),s("code",[t._v("Model.onUnsaved")])]),t._v(" for additional information.")])])])])]),t._v(" "),s("p",[t._v("Always start creation of items like this:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nitem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propertyA "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" someValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nitem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propertyB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" anotherValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nitem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("If you intend to gain access on an existing item you have to provide its UUID in constructor and load its record afterwards:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" item "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"12345678-1234-1234-1234-1234567890ab"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nitem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"static-methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#static-methods"}},[t._v("#")]),t._v(" Static Methods")]),t._v(" "),s("h3",{attrs:{id:"model-define"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-define"}},[t._v("#")]),t._v(" Model.define()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.define( name, schema, baseClass, adapter ) : Model")])]),t._v(" "),s("p",[t._v("This method is available to create a new model class according to provided definition. See the related documentation for "),s("router-link",{attrs:{to:"/guides/defining-models.html"}},[t._v("defining models")]),t._v(" and "),s("router-link",{attrs:{to:"/api/adapter.html"}},[t._v("on adapters")]),t._v(" for additional information.")],1),t._v(" "),s("h3",{attrs:{id:"model-list-0-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-list-0-2-0"}},[t._v("#")]),t._v(" Model.list() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.0+")])],1),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Important")]),t._v(" "),s("p",[t._v("This method's signature has changed significantly starting with v0.2.0.")])]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.list( queryOptions, resultOptions ) : Promise<Model[]>")])]),t._v(" "),s("p",[t._v("This method promises an (excerpt from) unconditional list of current model's instances. It takes up to two sets of options. The first one is affecting the query, the second one is affecting the result.")]),t._v(" "),s("h4",{attrs:{id:"query-related-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#query-related-options"}},[t._v("#")]),t._v(" Query-Related Options")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("offset")]),t._v(" is an optional number of matching items to skip. The default is "),s("code",[t._v("0")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("limit")]),t._v(" is an optional number of matching items to return at most. The default is "),s("code",[t._v("Infinity")]),t._v(".")]),t._v(" "),s("li",[s("strong",[t._v("sortBy")]),t._v(" is the name of a property to sort resulting items by. When omitted resulting items aren't sorted at all.")]),t._v(" "),s("li",[s("strong",[t._v("sortAscendingly")]),t._v(" is a boolean indicating whether resulting items should be sorted in ascending order or not. The default is true.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Performance")]),t._v(" "),s("p",[t._v("Sorting has a remarkable impact on performance. Defining index on any property you intend to sort items by is suggested to reduce this impact.")])]),t._v(" "),s("h4",{attrs:{id:"result-related-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#result-related-options"}},[t._v("#")]),t._v(" Result-Related Options")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("loadRecords")]),t._v(" is a boolean requesting whether either listed item should have loaded all its properties on return already. This will have an impact on performance and thus you might like to focus on matching item's UUIDs. The default is true, thus you have to set this option false explicitly to prevent the penalty on performance.")]),t._v(" "),s("li",[s("strong",[t._v("metaCollector")]),t._v(" may be an object which is receiving total number of matching items in property "),s("strong",[t._v("metaCollector.count")]),t._v(". Fetching total number of matching items is affecting the performance for it needs to discover all existing items of model without regards to selected "),s("strong",[t._v("offset")]),t._v(" and "),s("strong",[t._v("limit")]),t._v(" query options. On the other hand implicitly fetching total count might save another query which is beneficial, as well.")])]),t._v(" "),s("h4",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    offset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loadRecord"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("results")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" results"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// should display 5 at most")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("FYI")]),t._v(" "),s("p",[t._v("This method is just an alias for using "),s("a",{attrs:{href:"#model-find"}},[t._v("Model.find()")]),t._v(" with a particular query.")])]),t._v(" "),s("h3",{attrs:{id:"model-find-0-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-find-0-2-0"}},[t._v("#")]),t._v(" Model.find() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.0+")])],1),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Replacing findByAttribute()")]),t._v(" "),s("p",[t._v("Starting with v0.2.0 this method is replacing previously provided method Model.findByAttribute().")])]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.find( query, queryOptions, resultOptions ) : Promise<Model[]>")])]),t._v(" "),s("p",[t._v("This method is central to querying a collection of a model's items looking for model instances matching given query and related options.")]),t._v(" "),s("p",[t._v("Supported query options and result options have been described in context of "),s("a",{attrs:{href:"#model-list"}},[t._v("Model.list()")]),t._v(" before. The query is an object describing a test to be performed on every item of the model to pick those to be retrieved. Its generic syntax is as follows:")]),t._v(" "),s("p",[t._v("At top level the query object consists of exactly one property with its name selecting a test to perform. The property's value is providing additional information customizing the test. It's syntax strongly depends on the selected test's type.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This example is showing a query "),s("code",[t._v("{ true: {} }")]),t._v(". It is selecting a special type of test named "),s("strong",[t._v("true")]),t._v(". This test is used internally to implement Model.list() for it is succeeding on every tested item of a model. The test doesn't require any additional information thus the property's value is just an empty object.")]),t._v(" "),s("p",[t._v("These types of tests are available currently:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Test Name")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("true")]),t._v(" "),s("td",[s("em",[t._v("special")])]),t._v(" "),s("td",[t._v("This test always succeeds.")])]),t._v(" "),s("tr",[s("td",[t._v("eq")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is equal given value.")])]),t._v(" "),s("tr",[s("td",[t._v("neq")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is not equal given value.")])]),t._v(" "),s("tr",[s("td",[t._v("lt")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is less than a given value.")])]),t._v(" "),s("tr",[s("td",[t._v("lte")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is less than or equal a given value.")])]),t._v(" "),s("tr",[s("td",[t._v("gt")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is greater than a given value.")])]),t._v(" "),s("tr",[s("td",[t._v("gte")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is greater than or equal a given value.")])]),t._v(" "),s("tr",[s("td",[t._v("between")]),t._v(" "),s("td",[t._v("comparison")]),t._v(" "),s("td",[t._v("Tests if value of a property is in range of a lower and an upper limit.")])]),t._v(" "),s("tr",[s("td",[t._v("null")]),t._v(" "),s("td",[t._v("unary test")]),t._v(" "),s("td",[t._v("Tests if named property is unset.")])]),t._v(" "),s("tr",[s("td",[t._v("notnull")]),t._v(" "),s("td",[t._v("unary test")]),t._v(" "),s("td",[t._v("Tests if named property is set.")])])])]),t._v(" "),s("h4",{attrs:{id:"comparison-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#comparison-tests"}},[t._v("#")]),t._v(" Comparison Tests")]),t._v(" "),s("p",[t._v("All tests of type "),s("em",[t._v("comparison")]),t._v(" are require provision of a property's "),s("strong",[t._v("name")]),t._v(" and a "),s("strong",[t._v("value")]),t._v(" to compare named property per item of model with.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" eq"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lastName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Doe"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("This example is querying the model for all items with property "),s("strong",[t._v("lastName")]),t._v(" equal "),s("strong",[t._v("Doe")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" lte"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("This example is querying the model for all items with property "),s("strong",[t._v("age")]),t._v(" having value less than or equal 50.")]),t._v(" "),s("p",[t._v("A special case is the "),s("code",[t._v("between")]),t._v(" test for it requires provision of two parameters "),s("strong",[t._v("lower")]),t._v(" and "),s("strong",[t._v("upper")]),t._v(" instead of single parameter named "),s("strong",[t._v("value")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" between"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"age"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lower"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" upper"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("This example is querying the model for all items with property "),s("strong",[t._v("age")]),t._v(" having value between 30 and 50 inclusively.")]),t._v(" "),s("h4",{attrs:{id:"unary-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unary-tests"}},[t._v("#")]),t._v(" Unary Tests")]),t._v(" "),s("p",[t._v("The test "),s("code",[t._v("null")]),t._v(" is provided to search items that don't have actual value for a given property. Using "),s("code",[t._v("notnull")]),t._v(" the opposite case can be tested. Either test doesn't require any additional parameter but the "),s("strong",[t._v("name")]),t._v(" of the property to check.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("Model"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"started"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("This example is querying the model for all items with unset property "),s("strong",[t._v("started")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"model-fromobject-0-4-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-fromobject-0-4-3"}},[t._v("#")]),t._v(" Model.fromObject() "),s("Badge",{attrs:{type:"info"}},[t._v("0.4.3+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.fromObject( data, { omitComputed, serialised } ) : instance")])]),t._v(" "),s("p",[t._v("Creates new instance of model instantly adopting values of properties in provided data object using resulting "),s("a",{attrs:{href:"#instance-fromobject-0-4-3"}},[t._v("instance's method "),s("code",[t._v("fromObject()")])]),t._v(".")]),t._v(" "),s("p",[t._v("In addition provided object may include property "),s("code",[t._v("uuid")]),t._v(" to use it for identifying the resulting instance.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("See the "),s("a",{attrs:{href:"#instance-fromobject-0-4-3"}},[t._v("instance's counterpart for additional information")]),t._v(".")])]),t._v(" "),s("h3",{attrs:{id:"model-uuidtokey"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-uuidtokey"}},[t._v("#")]),t._v(" Model.uuidToKey()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.uuidToKey( uuid ) : string")])]),t._v(" "),s("p",[t._v("When accessing a record of data stored in a connected datasource the instance's UUID is converted into a key suitable for selecting that record. This method implements the proper conversion.")]),t._v(" "),s("h3",{attrs:{id:"model-keytouuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-keytouuid"}},[t._v("#")]),t._v(" Model.keyToUuid()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.keyToUuid( key ) : string")])]),t._v(" "),s("p",[t._v("This method is the counterpart to "),s("code",[t._v("Model.uuidToKey()")]),t._v(" and may be used to convert keys provided by some backend into the UUID suitable for identifying a related instance of the model.")]),t._v(" "),s("h3",{attrs:{id:"model-getindex-0-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-getindex-0-2-0"}},[t._v("#")]),t._v(" Model.getIndex() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.0+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.getIndex( propertyName, indexType ) : Index")])]),t._v(" "),s("p",[t._v("This method has been introduced to simplify access on a particular index. It is looking up "),s("a",{attrs:{href:"#model-indices"}},[t._v("Model.indices")]),t._v(" for the selected type of index covering given property. The result is undefined if there is no matching index or the instance managing the found index.")]),t._v(" "),s("h3",{attrs:{id:"model-uuidstream-0-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-uuidstream-0-2-0"}},[t._v("#")]),t._v(" Model.uuidStream() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.0+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.uuidStream() : Readable<Buffer>")])]),t._v(" "),s("p",[t._v("The method returns a readable stream for the binary UUIDs of all items. The stream is an object stream with each provided object being a buffer consisting of 16 octets.")]),t._v(" "),s("h3",{attrs:{id:"model-normalizeuuid-0-2-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-normalizeuuid-0-2-7"}},[t._v("#")]),t._v(" Model.normalizeUUID() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.7+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.normalizeUUID( Buffer | string ) : Buffer")])]),t._v(" "),s("p",[t._v("This method is provided for conveniently accessing code used internally to normalize and convert any provided UUID into its binary variant.")]),t._v(" "),s("h3",{attrs:{id:"model-formatuuid-0-2-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-formatuuid-0-2-7"}},[t._v("#")]),t._v(" Model.formatUUID() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.7+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("Model.formatUUID( Buffer | string ) : string")])]),t._v(" "),s("p",[t._v("This method is provided for conveniently accessing code used internally to normalize and convert any provided UUID into its string representation.")]),t._v(" "),s("h2",{attrs:{id:"static-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#static-properties"}},[t._v("#")]),t._v(" Static Properties")]),t._v(" "),s("p",[t._v("The abstract "),s("code",[t._v("Model")]),t._v(" does not expose any static properties itself. But there static properties exposed by model classes compiled from a definition using "),s("code",[t._v("Model.define()")]),t._v(". The following description refers to "),s("code",[t._v("Model.*")]),t._v(" to reflect this commonality between all compiled models that always derive from "),s("code",[t._v("Model")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"model-name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-name"}},[t._v("#")]),t._v(" Model.name")]),t._v(" "),s("p",[t._v("The name of model selected on defining it is exposed in context of model.")]),t._v(" "),s("h3",{attrs:{id:"model-adapter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-adapter"}},[t._v("#")]),t._v(" Model.adapter")]),t._v(" "),s("p",[t._v("This property exposes the "),s("router-link",{attrs:{to:"/api/adapter.html"}},[t._v("adapter")]),t._v(" selected to persistently store instances of the model.")],1),t._v(" "),s("h3",{attrs:{id:"model-schema"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-schema"}},[t._v("#")]),t._v(" Model.schema")]),t._v(" "),s("p",[t._v("The qualified definition of model is exposed as its "),s("em",[t._v("schema")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"model-indices"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-indices"}},[t._v("#")]),t._v(" Model.indices")]),t._v(" "),s("p",[t._v("This array is a concise list of indices defined in context of current model. Every item in this list provides the property either index is used for and the type of index or comparison operation. Every item looks like this one.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" property"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"loginName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eq"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The exposed list is empty if there was no index defined for any of current model's properties.")]),t._v(" "),s("h3",{attrs:{id:"model-derivesfrom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-derivesfrom"}},[t._v("#")]),t._v(" Model.derivesFrom")]),t._v(" "),s("p",[t._v("This property refers to the class current model is derived from. The resulting class is always "),s("code",[t._v("Model")]),t._v(" or some class derived from "),s("code",[t._v("Model")]),t._v(".")]),t._v(" "),s("p",[t._v("This reference can be used to invoked static methods of a model current one is deriving from:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRecord")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("derivesFrom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRecord")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add your code here")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"model-onunsaved"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#model-onunsaved"}},[t._v("#")]),t._v(" Model.onUnsaved "),s("Badge",{attrs:{type:"info",text:"0.2.5+"}})],1),t._v(" "),s("p",[t._v("By default, a model's instance prevents accidentally assigning twice to same property without saving intermittently. This also applies to loading an instance from data storage using "),s("code",[t._v("instance.load()")]),t._v(" after having assigned property values.")]),t._v(" "),s("p",[t._v("This behaviour is meant to prevent coding issues but might be an impediment in selected cases as well. Thus, it can be controlled per instance of a model using option "),s("code",[t._v("onUnsaved")]),t._v(" in second parameter of a model's constructor.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" itemUuid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onUnsaved"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ignore"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("The default per model depends on this property which is used in case there is no option provided on constructing item. It might take up to three different values:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fail")]),t._v(" is the default value and causes Error thrown when assigning twice to same property or on loading after assigning property.")]),t._v(" "),s("li",[s("code",[t._v("warn")]),t._v(" prevents either action from throwing Error but cause log message on stderr.")]),t._v(" "),s("li",[s("code",[t._v("ignore")]),t._v(" silently ignores those actions.")])]),t._v(" "),s("p",[t._v("This property is "),s("router-link",{attrs:{to:"/guides/defining-models.html#options"}},[t._v("defined as part of a schema's options section")]),t._v(".")],1),t._v(" "),s("h2",{attrs:{id:"instance-methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-methods"}},[t._v("#")]),t._v(" Instance Methods")]),t._v(" "),s("h3",{attrs:{id:"instance-load"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-load"}},[t._v("#")]),t._v(" instance.load()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.load() : Promise<Model>")])]),t._v(" "),s("p",[t._v("Promises current instances with values of its properties loaded from persistent data storage.")]),t._v(" "),s("h3",{attrs:{id:"instance-save"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-save"}},[t._v("#")]),t._v(" instance.save()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.save() : Promise<Model>")])]),t._v(" "),s("p",[t._v("Promises properties of current instance persistently saved in data storage.")]),t._v(" "),s("h3",{attrs:{id:"instance-validate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-validate"}},[t._v("#")]),t._v(" instance.validate()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.validate() : Promise<string[]>")])]),t._v(" "),s("p",[t._v("Validates values of every property in current instance promising a list of encountered validation errors. Validation is successful if promised list is empty, only.")]),t._v(" "),s("h3",{attrs:{id:"instance-remove"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-remove"}},[t._v("#")]),t._v(" instance.remove()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.remove() : Promise<Model>")])]),t._v(" "),s("p",[t._v("Promises removal of current instance from data storage.")]),t._v(" "),s("h3",{attrs:{id:"instance-toobject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-toobject"}},[t._v("#")]),t._v(" instance.toObject()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.toObject( { omitComputed, serialised } ) : object")])]),t._v(" "),s("p",[t._v("Extracts values of all "),s("em",[t._v("set")]),t._v(" properties of current instance as-is. By default, this includes values of computed properties, but excludes properties set "),s("code",[t._v("null")]),t._v(" currently.")]),t._v(" "),s("p",[t._v("Using options you might pass "),s("code",[t._v("true")]),t._v(" as option "),s("code",[t._v("omitComputed")]),t._v(" to omit computed properties. Separate option "),s("code",[t._v("serialised")]),t._v(" can be set to get all values serialised. This will prepare the resulting object for being serialised in turn, e.g. by using "),s("code",[t._v("JSON.stringify()")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"instance-fromobject-0-4-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-fromobject-0-4-3"}},[t._v("#")]),t._v(" instance.fromObject() "),s("Badge",{attrs:{type:"info"}},[t._v("0.4.3+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.fromObject( data, { omitComputed, serialised } ) : instance")])]),t._v(" "),s("p",[t._v("Adopts values of properties in provided data object for defined actual and computed properties of current model's instance. Any adopted value gets coerced.")]),t._v(" "),s("p",[t._v("Using options you might pass "),s("code",[t._v("true")]),t._v(" as option "),s("code",[t._v("omitComputed")]),t._v(" to ignore any property of provided data object matching a defined computed property of current instance. Separate option "),s("code",[t._v("serialised")]),t._v(" can be set to demand deserialisation of either adopted value before coercing it.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Due to current coercion implementations deserialisation isn't required in most cases but might be enabled to build future-proof implementations, e.g. when you are definitely processing data initially provided as JSON-formatted string.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("This method ignores any UUID included with provided data object. See the "),s("a",{attrs:{href:"#model-fromobject-0-4-3"}},[t._v("static counterpart for creating instances")]),t._v(" from such objects instead.")])]),t._v(" "),s("h2",{attrs:{id:"instance-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-properties"}},[t._v("#")]),t._v(" Instance Properties")]),t._v(" "),s("p",[t._v("Basically, an instance of a model exposes every actual or computed property according to the model's definition. Those properties' names must not start with a "),s("code",[t._v("$")]),t._v(" by intention to prevent naming conflicts with any implicitly available property described here.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Note!")]),t._v(" "),s("p",[t._v("There is one exclusion from this rule of prefixing implicit properties with "),s("code",[t._v("$")]),t._v(".")]),t._v(" "),s("p",[t._v("Every instance of a model is assumed to have a unique UUID for safely addressing it. This property is exposed as "),s("code",[t._v("instance.uuid")]),t._v(". A model's definition mustn't use this name for any element in turn.")])]),t._v(" "),s("h3",{attrs:{id:"instance-properties-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-properties-2"}},[t._v("#")]),t._v(" instance.$properties")]),t._v(" "),s("p",[t._v("The current instance's actual set of values per defined property is managed in a monitored object which is exposed as "),s("code",[t._v("instance.$properties")]),t._v(".")]),t._v(" "),s("p",[t._v("For example, if you have defined a property "),s("code",[t._v("name")]),t._v(" for your model then there is a property "),s("code",[t._v("instance.name")]),t._v(" suitable for reading or writing related value of either instance of model. The actual value is managed as "),s("code",[t._v("instance.$properties.name")]),t._v(" internally.")]),t._v(" "),s("p",[t._v("It does not matter which way you access properties, but for the sake of simplicity and to create future-proof code you should use the exposed properties instead of "),s("code",[t._v("instance.$properties")]),t._v(".")]),t._v(" "),s("p",[t._v("Internally, "),s("a",{attrs:{href:"https://www.npmjs.com/package/object-monitor",target:"_blank",rel:"noopener noreferrer"}},[t._v("object-monitor"),s("OutboundLink")],1),t._v(" is used to implement "),s("code",[t._v("instance.$properties")]),t._v(". Thus it is possible to read several meta information regarding the managed set of property values, e.g.")]),t._v(" "),s("ul",[s("li",[t._v("detecting whether values have been changed recently by reading "),s("code",[t._v("instance.$properties.$context.hasChanged")]),t._v(",")]),t._v(" "),s("li",[t._v("fetching map of recently changed values through "),s("code",[t._v("instance.$properties.$context.changed")]),t._v(", which is a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",target:"_blank",rel:"noopener noreferrer"}},[t._v("Map"),s("OutboundLink")],1),t._v(" listing names and new values of changed property values,")]),t._v(" "),s("li",[t._v("committing or rolling back recent changes to properties using either "),s("code",[t._v("instance.$properties.$context.commit()")]),t._v(" or "),s("code",[t._v("instance.$properties.$context.rollBack()")]),t._v(".")])]),t._v(" "),s("h3",{attrs:{id:"instance-adapter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-adapter"}},[t._v("#")]),t._v(" instance.$adapter")]),t._v(" "),s("p",[t._v("This property exposes adapter used to persistently store this instance of model. It might be different from the adapter defined for use with the model as a whole, though it won't be different in most cases.")]),t._v(" "),s("h3",{attrs:{id:"instance-isnew"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-isnew"}},[t._v("#")]),t._v(" instance.$isNew")]),t._v(" "),s("p",[t._v("This property indicates whether current instance has been freshly created. This is assumed in case of missing UUID associated with current instance.")]),t._v(" "),s("h3",{attrs:{id:"instance-exists"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-exists"}},[t._v("#")]),t._v(" instance.$exists")]),t._v(" "),s("p",[t._v("This property exposes promise for indicator whether data storage contains representation of instance currently.")]),t._v(" "),s("h3",{attrs:{id:"instance-super"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-super"}},[t._v("#")]),t._v(" instance.$super")]),t._v(" "),s("p",[t._v("This property exposes object sharing prototype with the the class this model's class is derived from. Thus, it exposes that one's instance-related methods and properties.")]),t._v(" "),s("p",[t._v("The reference doesn't work like ES6 "),s("code",[t._v("super")]),t._v(" keyword but requires slightly more complex code when trying to invoke instance methods of parent class:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arg1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("someMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" arg2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add your code here")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"instance-uuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-uuid"}},[t._v("#")]),t._v(" instance.uuid")]),t._v(" "),s("p",[t._v("This property is different from other implicit properties for it doesn't start with "),s("code",[t._v("$")]),t._v(" by intention.")]),t._v(" "),s("p",[t._v("An instance's UUID is used to uniquely select it in its model's collection of instances. On freshly created instances the UUID is "),s("code",[t._v("null")]),t._v(". After having saved such an instance the UUID assigned by backend adapter is exposed instead.")]),t._v(" "),s("p",[t._v("This property can be changed once after creating instances without UUID, only. The UUID might be given as string or as buffer of 16 octets.")]),t._v(" "),s("h3",{attrs:{id:"instance-uuid-0-2-0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-uuid-0-2-0"}},[t._v("#")]),t._v(" instance.$uuid "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.0+")])],1),t._v(" "),s("p",[t._v("This property has been introduced in v0.2.0 to expose the binary UUID used internally. It isn't meant to change the UUID. Use "),s("code",[t._v("instance.uuid")]),t._v(" for that. See the related remarks there.")]),t._v(" "),s("h3",{attrs:{id:"instance-datakey"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-datakey"}},[t._v("#")]),t._v(" instance.$dataKey")]),t._v(" "),s("p",[t._v("This property is related to the instance's UUID and exposes the key used to address the related record in data source connected via backend adapter.")]),t._v(" "),s("p",[t._v("On a freshly created instance this information is a template containing "),s("code",[t._v("%u")]),t._v(" as a placeholder for the UUID to be assigned on saving.")]),t._v(" "),s("h3",{attrs:{id:"instance-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-api"}},[t._v("#")]),t._v(" instance.$api")]),t._v(" "),s("p",[t._v("When integrating with Hitchy its API is available via this property making it very easy to use components of your application such as services in hooks and methods of a model.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    hooks"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeValidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runtime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("services"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ExtraValidator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$properties "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"instance-default-0-4-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-default-0-4-3"}},[t._v("#")]),t._v(" instance.$default "),s("Badge",{attrs:{type:"info"}},[t._v("0.4.3+")])],1),t._v(" "),s("p",[t._v("Every property may be "),s("router-link",{attrs:{to:"/guides/defining-models.html#default-coercion-0-4-3"}},[t._v("defined with a default value")]),t._v(" to be set on creating a model's instance. Whenever assigning value to either property it is possible to re-assign the declared default value by assigning this property, though it isn't either property's default value but some marker, only.")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),s("p",[t._v("Consider having model defined like this:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyModel"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        score"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This results in a model with properties named "),s("code",[t._v("type")]),t._v(" and "),s("code",[t._v("score")]),t._v(". Creating new instance of this model will assign provided default implicitly:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyModel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "foo"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("score "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 50")]),t._v("\n")])])]),s("p",[t._v("You can use this instance as usual and assign any value to its properties.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("score "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "bar"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("score "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 100")]),t._v("\n")])])]),s("p",[t._v("Whenever you wish to return to the default you don't need to look it up in schema but assign "),s("code",[t._v("instance.$default")]),t._v(" instead:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("score "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "foo"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("score "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 50")]),t._v("\n")])])])]),t._v(" "),s("h2",{attrs:{id:"hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" Hooks")]),t._v(" "),s("p",[t._v("An item's "),s("em",[t._v("life cycle")]),t._v(" consists of certain actions it is performing during its life as an instance of model's class at runtime. Some actions also affect its existence in an attached data storage.")]),t._v(" "),s("h3",{attrs:{id:"life-cycle-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#life-cycle-events"}},[t._v("#")]),t._v(" Life Cycle Events")]),t._v(" "),s("p",[t._v("An item's life cycle includes these actions:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Action")]),t._v(" "),s("th",[t._v("Remarks")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("create")]),t._v(" "),s("td",[t._v("An instance of "),s("code",[t._v("Model")]),t._v(" is constructed.")])]),t._v(" "),s("tr",[s("td",[t._v("load")]),t._v(" "),s("td",[t._v("An item's properties are loaded from attached data storage.")])]),t._v(" "),s("tr",[s("td",[t._v("validate")]),t._v(" "),s("td",[t._v("An item's properties are validated for being written to attached data storage afterwards.")])]),t._v(" "),s("tr",[s("td",[t._v("save")]),t._v(" "),s("td",[t._v("An item's properties are written to attached data storage.")])]),t._v(" "),s("tr",[s("td",[t._v("remove")]),t._v(" "),s("td",[t._v("An item's record is removed from attached data storage.")])])])]),t._v(" "),s("p",[t._v("For every action there is a pair of life cycle events: one occurs before either action and one occurs right after it (unless either action has failed). The events are named with prefixes "),s("code",[t._v("before")]),t._v(" or "),s("code",[t._v("after")]),t._v(" followed by related action's name resulting in camelCase name, e.g. "),s("code",[t._v("beforeCreate")]),t._v(" or "),s("code",[t._v("afterValidate")]),t._v(".")]),t._v(" "),s("p",[t._v("For every supported life cycle event there is an instance method of same name to be invoked whenever either event occurs. When "),s("router-link",{attrs:{to:"/guides/defining-models.html"}},[t._v("defining a model")]),t._v(" those "),s("em",[t._v("hooks")]),t._v(" can be replaced in "),s("router-link",{attrs:{to:"/guides/defining-models.html#hooks-for-life-cycle-events"}},[t._v("section "),s("strong",[t._v("hooks")])]),t._v(".")],1),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Asynchronous Hooks")]),t._v(" "),s("p",[t._v("By intention all hooks but "),s("code",[t._v("beforeCreate")]),t._v(" and "),s("code",[t._v("afterCreate")]),t._v(" may return a promise to delay further processing. Whenever one of those hooks is required to return data that data may be promised as well.")]),t._v(" "),s("p",[s("code",[t._v("beforeCreate")]),t._v(" and "),s("code",[t._v("afterCreate")]),t._v(" can't delay processing for being called in model's constructor which has to work synchronously.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Calling Parent Class Hooks")]),t._v(" "),s("p",[t._v("In combination with "),s("code",[t._v("instance.$super")]),t._v(" any code is capable of including related hook of parent class.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterValidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("errors")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" errors "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterValidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" errors "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add your code here")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("In addition, though, you must be aware of either hook of parent class might return promise as well requiring your hook to wait for the promise to be settled and adopt its result either way.")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterValidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("errors")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterValidate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" errors "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("errors")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// add your code here")]),t._v("\n            \n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" errors"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("h3",{attrs:{id:"instance-beforecreate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-beforecreate"}},[t._v("#")]),t._v(" instance.beforeCreate()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.beforeCreate( { uuid, options } ) : { uuid, options }")])]),t._v(" "),s("p",[t._v("When creating an item by means of wrapping it in an instance of defined model's class this hook is invoked. Given constructor arguments it is required to return the constructor arguments as provided or adjust them to be used instead.")]),t._v(" "),s("p",[t._v("The "),s("strong",[t._v("uuid")]),t._v(" is given as instance of "),s("strong",[t._v("Buffer")]),t._v(" or as string. The "),s("strong",[t._v("options")]),t._v(" object might contain a reference on a backend adapter to use instead of model's default adapter. In addition there might be a "),s("a",{attrs:{href:"#model-onunsaved"}},[t._v("mode for handling multiple consecutive assignments to a property without saving intermittently")]),t._v(".")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Important!")]),t._v(" "),s("p",[t._v("Talking about "),s("em",[t._v("creating")]),t._v(" an item refers to creating an instance in runtime. It doesn't mean that there is a new item currently missing in connected data storage. It is just about the moment when a runtime instance of this model is constructed to represented the item.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("No Promise!")]),t._v(" "),s("p",[t._v("For being invoked in context of new instance's constructor this hook can't delay processing by returning a promise. Any returned promise is ignored.")])]),t._v(" "),s("h3",{attrs:{id:"instance-aftercreate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-aftercreate"}},[t._v("#")]),t._v(" instance.afterCreate()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.afterCreate()")])]),t._v(" "),s("p",[t._v("This hook is invoked at the very end of a new instance's constructor.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("No Promise!")]),t._v(" "),s("p",[t._v("For being invoked in context of new instance's constructor this hook can't delay processing by returning a promise. Any returned promise is ignored.")])]),t._v(" "),s("h3",{attrs:{id:"instance-beforeload-0-2-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-beforeload-0-2-7"}},[t._v("#")]),t._v(" instance.beforeLoad() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.7+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.beforeLoad()")])]),t._v(" "),s("p",[t._v("This hook is invoked right before loading item's record from attached data storage.")]),t._v(" "),s("h3",{attrs:{id:"instance-afterload-0-2-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-afterload-0-2-7"}},[t._v("#")]),t._v(" instance.afterLoad() "),s("Badge",{attrs:{type:"info"}},[t._v("0.2.7+")])],1),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.afterLoad( object ) : object")])]),t._v(" "),s("p",[t._v("When having read item's record from attached data storage this hook is invoked with that record as argument to optionally adjust it before returning it. The hook's return value is eventually used to setting new values of item's properties.")]),t._v(" "),s("h3",{attrs:{id:"instance-beforevalidate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-beforevalidate"}},[t._v("#")]),t._v(" instance.beforeValidate()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.beforeValidate() : Error[]")])]),t._v(" "),s("p",[t._v("This hook is invoked before validating all properties of current instance to comply with defined constraints. It might return a list of errors to be concatenated with any error encountered by definition-based validation.")]),t._v(" "),s("h3",{attrs:{id:"instance-aftervalidate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-aftervalidate"}},[t._v("#")]),t._v(" instance.afterValidate()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.afterValidate( Error[] ) : Error[]")])]),t._v(" "),s("p",[t._v("This hook is invoked after validating all property values of current instance to comply with\ndefined constraints. The list of error messages is passed in first argument as an error of strings. The probably adjusted list of messages is meant to be returned by this hook.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Important")]),t._v(" "),s("p",[t._v("Any validation of properties fails if there is at least one error message returned. On failed validation properties aren't saved to attached data storage.")]),t._v(" "),s("p",[t._v("Invalid properties may be saved unless this hook is passing provided errors on return.")])]),t._v(" "),s("h3",{attrs:{id:"instance-beforesave"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-beforesave"}},[t._v("#")]),t._v(" instance.beforeSave()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.beforeSave( boolean, object ) : object")])]),t._v(" "),s("p",[t._v("This hook is invoked prior to persistently saving property values of current instance in a datasource connected via backend adapter.")]),t._v(" "),s("p",[t._v("First provided argument indicates whether there is an existing record in attached data storage ("),s("code",[t._v("true")]),t._v(") or not.")]),t._v(" "),s("p",[t._v("Second provided argument is the serialized record of item to be saved ready for writing in attache data storage. The hook is required to return that record as-is or apply some modifications before returning it eventually.")]),t._v(" "),s("h3",{attrs:{id:"instance-aftersave"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-aftersave"}},[t._v("#")]),t._v(" instance.afterSave()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.afterSave( boolean )")])]),t._v(" "),s("p",[t._v("This hook is invoked after saving property values of current instance in a datasource connected via backend adapter. Provided argument indicates whether there was an existing record in attached data storage ("),s("code",[t._v("true")]),t._v(") before saving this time or not.")]),t._v(" "),s("h3",{attrs:{id:"instance-beforeremove"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-beforeremove"}},[t._v("#")]),t._v(" instance.beforeRemove()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.beforeRemove()")])]),t._v(" "),s("p",[t._v("This hook is invoked prior to removing current instance. It might throw exception or reject some returned promise to prevent removal of instance.")]),t._v(" "),s("h3",{attrs:{id:"instance-afterremove"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#instance-afterremove"}},[t._v("#")]),t._v(" instance.afterRemove()")]),t._v(" "),s("p",[s("strong",[t._v("Signature:")]),t._v(" "),s("code",[t._v("instance.afterRemove()")])]),t._v(" "),s("p",[t._v("This hook is invoked after having removed current instance. The hook is invoked in context of removed instance.")])])}),[],!1,null,null,null);e.default=n.exports}}]);