(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{60:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"model-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#model-definition","aria-hidden":"true"}},[t._v("#")]),t._v(" Model Definition")]),t._v(" "),a("h2",{attrs:{id:"how-to-define"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-define","aria-hidden":"true"}},[t._v("#")]),t._v(" How To Define")]),t._v(" "),a("p",[t._v("There are two ways supported for defining models:")]),t._v(" "),a("ul",[a("li",[t._v("In server-side code you may use the Model API directly to define new models.")]),t._v(" "),a("li",[t._v("Due to integrating with Hitchy's automatic discovery of plugins it is possible to place model definitions in files expected in certain locations of your project.")])]),t._v(" "),a("p",[t._v("Both scenarios are described below.")]),t._v(" "),a("h3",{attrs:{id:"defining-in-server-side-code"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-in-server-side-code","aria-hidden":"true"}},[t._v("#")]),t._v(" Defining in Server-Side Code")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("The preferred way of defining models in a Hitchy application is via filesystem as described below.")])]),t._v(" "),a("p",[t._v("For sure, there is code reading and processing those files. That code is using API to be described in this chapter. You might want to use this API in testing your code e.g. to mock models your code is relying on.")]),t._v(" "),a("p",[t._v("The main module of hitchy-plugin-odem library exposes several classes. One of them is "),a("code",[t._v("Model")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hitchy-plugin-odem"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This class is providing static method "),a("code",[t._v("Model.define()")]),t._v(" accepting these arguments:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("First there is the name of the desired model.")]),t._v(" "),a("p",[t._v("When defining models via filesystem those models are "),a("a",{attrs:{href:"https://hitchyjs.github.io/core/internals/components.html#models",target:"_blank",rel:"noopener noreferrer"}},[t._v("discovered by Hitchy"),a("OutboundLink")],1),t._v(" and "),a("a",{attrs:{href:"https://hitchyjs.github.io/core/internals/components.html#exposure-at-runtime",target:"_blank",rel:"noopener noreferrer"}},[t._v("exposed just like any other component"),a("OutboundLink")],1),t._v(". The resulting name of either model as a component will be used for naming the model by default.")]),t._v(" "),a("p",[t._v("When defining in code you are responsible for applying any such derivations as desired. In this case the model's name isn't used in any sort of registry implicitly and thus might be ignored as well.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Reminder")]),t._v(" "),a("p",[t._v("The definition in second argument might contain property "),a("router-link",{attrs:{to:"/guides/defining-models-filesystem.html#naming-models"}},[a("code",[t._v("name")])]),t._v(" to define a different name explicitly. This information is always used in favour of the name provided in first argument here.")],1)]),t._v(" "),a("p",[t._v("The model's name is used to expose it as part of Hitchy's runtime API. It might be used to name the related set in datasource available via some adapter, as well.")])]),t._v(" "),a("li",[a("p",[t._v("Second argument provides the definition as it is exported by the defining file. The definition is required. It also must define at least one actual property.")])]),t._v(" "),a("li",[a("p",[t._v("An optional third argument may be provided to choose a particular base class the defined model is deriving from. That base class still needs to be derived from "),a("code",[t._v("Model")]),t._v(", though.")])]),t._v(" "),a("li",[a("p",[t._v("A fourth argument might be given to select an adapter to be explicitly used with the resulting model instead of using some globally configured default adapter.")])])]),t._v(" "),a("p",[t._v("The full signature is:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" definition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" baseClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dataStorageAdapter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Basically it is okay to stick with the first two arguments:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hitchy-plugin-odem"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Person "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"person"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tfirstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Third argument can be used to create a hierarchy of models:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hitchy-plugin-odem"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Person "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"person"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tfirstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Employee "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("define")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"employee"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tprops"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\temployedSince"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"date"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Person "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"defining-in-filesystem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-in-filesystem","aria-hidden":"true"}},[t._v("#")]),t._v(" Defining In Filesystem")]),t._v(" "),a("p",[t._v("Hitchy ODM is tightly integrated with Hitchy by means of meeting the latter one's conventions on how to declare server-side models. That's why defining a model basically works just by adding a Javascript file in folder "),a("strong",[t._v("api/model")]),t._v(" of your Hitchy-based project. For example, by creating file "),a("strong",[t._v("api/model/user.js")]),t._v(" you are implicitly defining to have a user model named "),a("code",[t._v("User")]),t._v(".")]),t._v(" "),a("p",[t._v("Any such file is assumed to expose the definition of another model. This is possible by sticking with the following pattern:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("definition"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In this pattern "),a("code",[t._v("<definition>")]),t._v(" must be replaced with the actual definition of a model. A definition's syntax is commonly described below.")]),t._v(" "),a("p",[t._v("Any file-based definition of a model is eventually processed through "),a("code",[t._v("Model.define()")]),t._v(" as decribed before. The resulting model is then exposed in Hitchy's runtime API. So in a request handler you might use the model as "),a("code",[t._v("req.api.runtime.models.<ModelName>")]),t._v(".")]),t._v(" "),a("p",[t._v("The name of a model is derived from the name of the defining file. This derivation assumes filename is given in kebab-case and converts it into PascalCase.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Example")]),t._v(" "),a("p",[t._v("To create an application working with models "),a("strong",[t._v("Post")]),t._v(", "),a("strong",[t._v("Comment")]),t._v(" and "),a("strong",[t._v("User")]),t._v(" you basically need to create files "),a("strong",[t._v("post.js")]),t._v(", "),a("strong",[t._v("comment.js")]),t._v(" and "),a("strong",[t._v("user.js")]),t._v(" in folder "),a("strong",[t._v("api/model")]),t._v(". A model named "),a("strong",[t._v("BlogEditor")]),t._v(" would be defined in a file named "),a("strong",[t._v("api/model/blog-editor.js")]),t._v(".")])]),t._v(" "),a("h2",{attrs:{id:"definition-syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#definition-syntax","aria-hidden":"true"}},[t._v("#")]),t._v(" Definition Syntax")]),t._v(" "),a("p",[t._v("The definition of a model always starts with an object. Most properties of this object start another section of definition each defining a different kind of elements per model. In addition some further properties are used to define global information.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Properties vs. Properties")]),t._v(" "),a("p",[t._v("This documentation is using the term "),a("em",[t._v("properties")]),t._v(" in different situations. For better understanding it is viable to understand those differences.")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Definition properties")]),t._v(" are properties of the definition object as described here.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Root-level definition properties")]),t._v(" are those properties of the definition object mentioned right before. They start sections of the definition or define global information. In opposition to those all other definition properties are used at deeper levels of definition object's hierarchy.")])]),t._v(" "),a("li",[a("p",[t._v("Defining a model always requires to define the model's properties. These are separated into")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("actual properties")]),t._v(" and")]),t._v(" "),a("li",[a("strong",[t._v("computed properties")])])]),t._v(" "),a("p",[t._v("with the latter being calculated from the former or any other source of information at runtime of a model's instance.")])])])]),t._v(" "),a("h3",{attrs:{id:"elements-of-model-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elements-of-model-definition","aria-hidden":"true"}},[t._v("#")]),t._v(" Elements of Model Definition")]),t._v(" "),a("p",[t._v("Every definition of a module needs to contain at least one property. As demonstrated before, properties are defined in a separate section of definition named "),a("strong",[t._v("props")]),t._v(". This section is just one of several supported sections like these:")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("props")]),t._v(" is defining all "),a("em",[t._v("actual properties")]),t._v(",")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("computed")]),t._v(" defines "),a("em",[t._v("computed properties")]),t._v(" that derive their value from actual properties,")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("methods")]),t._v(" lists functions to be exposed as "),a("em",[t._v("instance methods")]),t._v(" of resulting model,")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("hooks")]),t._v(" provides lists of functions to be registered as handlers for a limited set of life cycle event.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("options")]),t._v(" provides model-related options adjusting its behaviour in certain situations.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("indices")]),t._v(" (or "),a("strong",[t._v("indexes")]),t._v(") provides index definitions used to improve performance on searching and sorting items.")])])]),t._v(" "),a("p",[t._v("Either part is described in detail below.")]),t._v(" "),a("h3",{attrs:{id:"actual-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#actual-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Actual Properties")]),t._v(" "),a("p",[t._v("Defining at least one actual property in "),a("strong",[t._v("props")]),t._v(" is mandatory. Every such property definition consists of a unique name for the property and an object describing its type and optional constraints.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("The name of an actual property mustn't be used by any other actual or computed property or method of same model. In addition it may neither start with "),a("code",[t._v("$")]),t._v(" nor match name of any life cycle event nor match any of following keywords: "),a("code",[t._v("prototype")]),t._v(", "),a("code",[t._v("super")]),t._v(", "),a("code",[t._v("constructor")]),t._v(", "),a("code",[t._v("uuid")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("This example is defining two actual properties. Their type defaults to "),a("em",[t._v("string")]),t._v(" unless some type is picked explicitly by providing "),a("code",[t._v("type")]),t._v(" in property description:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Currently supported types are:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("string")])]),t._v(" "),a("li",[a("code",[t._v("number")])]),t._v(" "),a("li",[a("code",[t._v("integer")])]),t._v(" "),a("li",[a("code",[t._v("date")])]),t._v(" "),a("li",[a("code",[t._v("boolean")])])]),t._v(" "),a("p",[t._v("Either types comes with a set of specific constraints to be defined in addition. Some constraints are applicable to either type of property.")]),t._v(" "),a("h3",{attrs:{id:"computed-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#computed-properties","aria-hidden":"true"}},[t._v("#")]),t._v(" Computed Properties")]),t._v(" "),a("p",[t._v("In addition to "),a("em",[t._v("actual")]),t._v(" properties a model may include computed properties. Every such computed property has a "),a("em",[t._v("unique")]),t._v(" name in scope of its model and an implementation actually computing its value.")]),t._v(" "),a("p",[t._v("Computed properties are defined in section "),a("strong",[t._v("computed")]),t._v(". This section is a regular object consisting of named methods. Every method in this section defines another computed property.")]),t._v(" "),a("p",[t._v("Either computed property's function is invoked in scope of an instance of its model. When reading computed property, the function is invoked without any argument. It is possible to assign values to computed properties, as well. This results in its function being invoked with provided value as sole argument.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("The name of an computed property mustn't be used by any other actual or computed property or method of same model. In addition it may neither start with "),a("code",[t._v("$")]),t._v(" nor match name of any life cycle event nor match any of following keywords: "),a("code",[t._v("prototype")]),t._v(", "),a("code",[t._v("super")]),t._v(", "),a("code",[t._v("constructor")]),t._v(", "),a("code",[t._v("uuid")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ageInSeconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ageInDays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Computed properties can be used like regular properties:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" someModelInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInDays "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This includes assigning value to a computed property:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("someModelInstance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInDays "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("In this case the defined function implementing the computed property's behaviour is invoked with assigned value in first argument:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ageInSeconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ageInDays")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            \n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"selecting-type-handler-0-3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selecting-type-handler-0-3-0","aria-hidden":"true"}},[t._v("#")]),t._v(" Selecting Type Handler "),a("Badge",{attrs:{type:"info"}},[t._v("0.3.0+")])],1),t._v(" "),a("p",[t._v("Computed properties can be indexed and it's possible to use them for searching instances - with or without index. Discovering matches strongly depends on selected search operation, such as "),a("strong",[t._v("eq")]),t._v(" or "),a("strong",[t._v("lte")]),t._v(" testing for records with property's value equal or less than a given value.")]),t._v(" "),a("p",[t._v("Any such operation depends on selected property's type of value in turn. For actualy properties you already know how to define a particular type of values.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("A computed property doesn't need to be bound to a particular type of values unless using it for searching matches.")])]),t._v(" "),a("p",[t._v("For a computed property it is possible to select an assumed type of result value by appending type's name to the computed property's name separated by a single colon.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ageInSeconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"integer"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ageInDays:number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In this example the name "),a("code",[t._v("ageInDays")]),t._v(" has been extended by some type selection: "),a("code",[t._v("ageInDays:number")]),t._v(". The quotation marks are required to have the colon considered part of name.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("The suffix "),a("code",[t._v(":number")]),t._v(" is not a part of resulting property's name. It is still called "),a("code",[t._v("ageInDays")]),t._v(" and is used just like before.")])]),t._v(" "),a("h4",{attrs:{id:"extended-definition-0-3-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extended-definition-0-3-0","aria-hidden":"true"}},[t._v("#")]),t._v(" Extended Definition "),a("Badge",{attrs:{type:"info"}},[t._v("0.3.0+")])],1),t._v(" "),a("p",[t._v("A definition of computed properties as presented before is considered the simple and usual way. However, on processing such a concise definition a more complex format is created to firmly expose all information related to the computed property.")]),t._v(" "),a("p",[t._v("When inspecting a resulting model's schema for defined computed properties there will be an object instead of a function.")]),t._v(" "),a("ul",[a("li",[t._v("In its property "),a("code",[t._v("code")]),t._v(" there is the actually given function implementing the computed property.")]),t._v(" "),a("li",[t._v("The optionally "),a("a",{attrs:{href:"#selecting-type-handler-0-3-0"}},[t._v("defined result type to be assumed")]),t._v(" is named in property "),a("code",[t._v("type")]),t._v(" and the according "),a("em",[t._v("type handler")]),t._v(" is exposed as "),a("code",[t._v("$type")]),t._v(". Either property may be "),a("code",[t._v("undefined")]),t._v(" in case of omitting definition of particular result type.")])]),t._v(" "),a("p",[t._v("In addition the name of computed property as used in model's schema is stripped off any appended type information.")]),t._v(" "),a("p",[t._v("For example, a definition like")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fullName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ageInDays:number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("will be exposed in schema like this:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fullName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ageInDays"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ageInSeconds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        $type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("API")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" type handler "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" numbers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("This resulting format for defining a computed property may be used in the first place instead of that simple approach described before, as well.")]),t._v(" "),a("h3",{attrs:{id:"instance-methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#instance-methods","aria-hidden":"true"}},[t._v("#")]),t._v(" Instance Methods")]),t._v(" "),a("p",[t._v("The definition may list methods to be exposed per instance of resulting model. They are provided in section "),a("strong",[t._v("methods")]),t._v(" of definition object. Methods are invoked in context of a particular instance of resulting model, thus using "),a("code",[t._v("this")]),t._v(" is available for accessing an instance's properties.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("Arrow functions don't work here for lacking support for "),a("code",[t._v("this")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("The name of a method mustn't be used by any other actual or computed property or method of same model. In addition it may neither start with "),a("code",[t._v("$")]),t._v(" nor match name of any life cycle event nor match any of following keywords: "),a("code",[t._v("prototype")]),t._v(", "),a("code",[t._v("super")]),t._v(", "),a("code",[t._v("constructor")]),t._v(", "),a("code",[t._v("uuid")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("clearText")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" cleartext "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"hooks-for-life-cycle-events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks-for-life-cycle-events","aria-hidden":"true"}},[t._v("#")]),t._v(" Hooks for Life-Cycle Events")]),t._v(" "),a("p",[t._v("In section "),a("code",[t._v("hooks")]),t._v(" a listener function for every supported life-cycle event may be defined. A listener is invoked in context of the affected model (except for beforeCreate), thus using "),a("code",[t._v("this")]),t._v(" is available to access the affected instance. Arguments passed on calling either hook depends on related life cycle event.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",[t._v("Arrow functions don't work here for lacking support for "),a("code",[t._v("this")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        someProp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeValidate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO implement handler, instance is available as `this`")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Information")]),t._v(" "),a("p",[t._v("For improved readability of resulting definition hooks may use prefix "),a("code",[t._v("on")]),t._v(" preceding name of life-cycle event with that one's first letter capitalized. Thus, the alias "),a("code",[t._v("onBeforeValidate")]),t._v(" can be used in definition instead of "),a("code",[t._v("beforeValidate")]),t._v(". In the schema exposed on resulting model this prefix will be removed, though.")])]),t._v(" "),a("h3",{attrs:{id:"options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#options","aria-hidden":"true"}},[t._v("#")]),t._v(" Options")]),t._v(" "),a("p",[t._v("A schema definition may include options for customizing the resulting model's behaviour in selected situations. These options are given in a separate section of schema named "),a("code",[t._v("options")]),t._v(".")]),t._v(" "),a("p",[t._v("These options are supported currently:")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("onUnsaved")]),t._v(" controls value exposed as "),a("router-link",{attrs:{to:"/api/model.html#model-onunsaved"}},[t._v("property "),a("code",[t._v("onUnsaved")]),t._v(" of resulting model")]),t._v(".")],1)]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        someProp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        onUnsaved"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ignore"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"indices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#indices","aria-hidden":"true"}},[t._v("#")]),t._v(" Indices")]),t._v(" "),a("p",[t._v("Defining a model basically does not require definition of any index. However, managing large amounts of items strongly benefits from indices that support operations frequently used to search and sort instances by a property either index is covering.")]),t._v(" "),a("p",[t._v("Indices result in redundantly stored information and thus shouldn't be created for each and every property and operation probably used for searching instances some day. Managing indices has a negative impact on saving data, too. In addition, temporary indices result in Hitchy applications taking more time to start. That's why you should always explicitly define as many indices as required and as little indices as needed.")]),t._v(" "),a("p",[t._v("There are two opportunities for defining indices to be described below.")]),t._v(" "),a("h4",{attrs:{id:"defining-per-actual-property"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-per-actual-property","aria-hidden":"true"}},[t._v("#")]),t._v(" Defining Per Actual Property")]),t._v(" "),a("p",[t._v("Indices may be defined in conjunction with either property just like its type and optional constraints. A property's indices are defined in another definition property named "),a("code",[t._v("index")]),t._v(" there. This definition property is listing types of indices each usually related to some test operation used on searching items by this particular property. The resulting index is meant to improve that related operation's performance.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eq"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"number"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This example is declaring indices for the properties "),a("code",[t._v("firstName")]),t._v(" and "),a("code",[t._v("age")]),t._v(". It doesn't define an index for property "),a("code",[t._v("lastName")]),t._v(".")]),t._v(" "),a("p",[t._v("In case of "),a("code",[t._v("firstName")]),t._v(" an index of type "),a("code",[t._v("eq")]),t._v(" is defined, which is an abbreviation for "),a("em",[t._v("equality")]),t._v(". This index is meant to improve searching items exactly matching some given value.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Equality is sufficient")]),t._v(" "),a("p",[t._v("By design, an "),a("em",[t._v("equality")]),t._v(" index is suitable for improving additional search operations as well. That's why you would stick with equality indices in most cases and it is why Odem currently isn't supporting any other type of index.")])]),t._v(" "),a("p",[t._v("The second case of "),a("code",[t._v("age")]),t._v(" is illustrating opportunity to define separate indices suitable for improving search by "),a("code",[t._v("age")]),t._v(" being "),a("strong",[t._v("g")]),t._v("reater "),a("strong",[t._v("t")]),t._v("han (thus "),a("code",[t._v("gt")]),t._v(") or "),a("strong",[t._v("l")]),t._v("ess "),a("strong",[t._v("t")]),t._v("han (thus "),a("code",[t._v("lt")]),t._v(") some given value.")]),t._v(" "),a("p",[t._v("When defining single index per property the index type may be given as string, too. Using "),a("code",[t._v("true")]),t._v(" instead of an index type name is identical to using "),a("code",[t._v('"eq"')]),t._v(".")]),t._v(" "),a("p",[t._v("Multiple indices may be defined per property. This requires use of an array listing type of either index. Alternatively an object may be used to map either type of index into some truthy value. This organisation is adopted by schema of resulting model. See the "),a("a",{attrs:{href:"#index-reducer"}},[t._v("section on index reducers")]),t._v(" below for some examples.")]),t._v(" "),a("h4",{attrs:{id:"defining-index-in-separate-section"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defining-index-in-separate-section","aria-hidden":"true"}},[t._v("#")]),t._v(" Defining Index in Separate Section "),a("Badge",{attrs:{type:"info",text:"0.2.8+"}})],1),t._v(" "),a("p",[t._v("Some use cases can't be defined in context of an actual property's definition. That's why defining indices in a dedicated section of your schema definition is supported as well.")]),t._v(" "),a("p",[t._v("Section "),a("strong",[t._v("indices")]),t._v(" (or "),a("strong",[t._v("indexes")]),t._v(" or "),a("strong",[t._v("index")]),t._v(" which are checked in this order as fallback, only) of your schema definition may provide an object mapping either name of an index into its definition. The latter is given as another object.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In this example two indices named "),a("code",[t._v("firstName")]),t._v(" and "),a("code",[t._v("age")]),t._v(" are defined. The names must be unique in context of defined model.")]),t._v(" "),a("p",[t._v("The index options are customizing the kind of index. There is a default for every supported option. If you just want to rely on all defaults you might provide "),a("code",[t._v("true")]),t._v(" instead of the options object.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        age"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("Here come the commonly supported options per index definition:")]),t._v(" "),a("ul",[a("li",[t._v("The "),a("strong",[t._v("type")]),t._v(" of index is usually "),a("code",[t._v('"eq"')]),t._v(" selecting definition of an equality index. It is the default type and as of now it is the only supported one as well.")]),t._v(" "),a("li",[t._v("The index "),a("strong",[t._v("reducer")]),t._v(" is a function to be invoked on every value that's passed to the index e.g. for tracking its containing item on change of indexed property's value or for searching items by indexed property.")])]),t._v(" "),a("p",[t._v("When defining a property-related index here (instead of doing so in context of property as described before) another option "),a("strong",[t._v("property")]),t._v(" selects the model's property which is to be covered by resulting index. This may name may address an actual or a computed property.")]),t._v(" "),a("p",[t._v("When defining an index for a computed property there is no reliable information on what type of values the computed property will return for indexing. Thus you should provide a particular type in option "),a("strong",[t._v("propertyType")]),t._v(". Its value works equivalent to the "),a("strong",[t._v("type")]),t._v(" option provided on defining actual properties. However, when omitted the default isn't "),a("code",[t._v('"string"')]),t._v(" but some abstract base type which is slightly more capable of handling different types of values than string type handler.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        lastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    computed"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fullName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("searchable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstName "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLowerCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    indices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        lastName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        fullName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        searchable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            propertyType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In this example three indices of type "),a("em",[t._v("equality")]),t._v(" are defined for covering the actual property "),a("strong",[t._v("lastName")]),t._v(" and the computed properties "),a("strong",[t._v("fullName")]),t._v(" and "),a("strong",[t._v("searchable")]),t._v(". Definition of the latter includes declaration of assuming string values, only.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Important")]),t._v(" "),a("p",[t._v("A schema must not define multiple indices of same type for the same property. This holds true even when defining some indices in context of properties and some in context of this dedicated section.")])]),t._v(" "),a("h4",{attrs:{id:"index-reducer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-reducer","aria-hidden":"true"}},[t._v("#")]),t._v(" Index Reducer "),a("Badge",{attrs:{type:"info",text:"0.2.7+"}})],1),t._v(" "),a("p",[t._v("By default any index is created using selected property's values as-is. In several cases this isn't desired, though.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("String-based indices work case-sensitive by default. Often it is sufficient to work case-insensitively. An index reducer can be used to establish this.")])]),t._v(" "),a("li",[a("p",[t._v("When defining index for a property of type "),a("strong",[t._v("date")]),t._v(" there might be different values for every item due to creating another item every second. This would result in a very inefficient index tree. Probably the application doesn't need to find values of that property for every second, but is satisfied with searching all items of a day.")])]),t._v(" "),a("li",[a("p",[t._v("When defining index on a string property this property might have arbitrarily long string values resulting in a huge waste of memory when redundantly using either string for indexing in full. The related application might be okay with distinguishing between given string values when focusing on first 20 characters per string. In this case saving more than 20 characters per string value doesn't make sense.")])])]),t._v(" "),a("p",[t._v("In either situation an "),a("em",[t._v("index reducer")]),t._v(" may be defined. This is a function invoked to derive a value for use in declared index from either actual value of related property. When defining index reducer for single equality index you may provide a definition property "),a("strong",[t._v("index")]),t._v(" which is a function. Just replace:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eq"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("with")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("to declare index reducer for equality index that is causing index to always cover first 20 characters per string value at most.")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Important!")]),t._v(" "),a("p",[t._v("Any index reducer is invoked if related value is set, only. Thus index reducers are never invoked with "),a("code",[t._v("null")]),t._v(" or "),a("code",[t._v("undefined")]),t._v(".")])]),t._v(" "),a("p",[t._v("The definition property "),a("strong",[t._v("index")]),t._v(" must be given as object when declaring index reducer for other types of indices or when defining multiple indices with one or more of them using index reducer. The following example is equivalent to the previous one:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("eq")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("You can declare different reducers per type of index this way:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("eq")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("gt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Reducers are always invoked of context of related item. That's why any reducer can access full API of that item when using regular function instead of arrow-function:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrumble")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("When combining definition of multiple indices you may provide "),a("code",[t._v("true")]),t._v(" instead of a reducer function to define related type of index without custom index reducer:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        firstName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("eq")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrumble")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                gt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("When searching a model for property value with index using index reducer the search value is passed through either index reducer as well.")]),t._v(" "),a("h3",{attrs:{id:"naming-models"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#naming-models","aria-hidden":"true"}},[t._v("#")]),t._v(" Naming Models")]),t._v(" "),a("p",[t._v("The name of a model is provided as first argument to "),a("code",[t._v("Model.define()")]),t._v(". In case of defining via filesystem this name is derived from the defining file as described before.")]),t._v(" "),a("p",[t._v("However, every definition of a model may provide an explicit name to use instead. This name must be provided in special root-level definition property "),a("code",[t._v("name")]),t._v(".")]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Limitations")]),t._v(" "),a("p",[t._v("Due to using a model's name in string interpolations in context of evaluated code model names have to start with a latin letter followed by a mixture of further latin letters, digits and underscores.")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("Good:")]),t._v(" My5thGrade_YearBook_")]),t._v(" "),a("li",[a("strong",[t._v("Bad:")]),t._v(" My 5.-Grade Year Book "),a("em",[t._v("or")]),t._v(" My-5thGrade-YearBook")])])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyCustomName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        someName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("When putting this in a file "),a("strong",[t._v("api/model/public-holiday.js")]),t._v(" the resulting model won't be implicitly named "),a("strong",[t._v("PublicHoliday")]),t._v(", but "),a("strong",[t._v("MyCustomName")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"property-processing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-processing","aria-hidden":"true"}},[t._v("#")]),t._v(" Property Processing")]),t._v(" "),a("p",[t._v("A model's properties are passing separate stages in different situations of interacting with a model's instance. In general, those stages are:")]),t._v(" "),a("h3",{attrs:{id:"serialisation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serialisation","aria-hidden":"true"}},[t._v("#")]),t._v(" Serialisation")]),t._v(" "),a("p",[t._v("A property's value is serialised when writing it to persistent data storage through some adapter. Values are converted into a format which is basically just describing the original value and is suitable for being written into a data storage for later recovery.")]),t._v(" "),a("h3",{attrs:{id:"deserialisation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserialisation","aria-hidden":"true"}},[t._v("#")]),t._v(" Deserialisation")]),t._v(" "),a("p",[t._v("A property's value is deserialised when reading it back from persistent data storage through some adapter. This is the counterpart to serialisation and recovers the original value of a property from its description resulting from previous serialisation.")]),t._v(" "),a("h3",{attrs:{id:"coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" Coercion")]),t._v(" "),a("p",[t._v("A property's value is "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Type_conversion",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("coerced")]),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("when assigning a value as in "),a("code",[t._v("instance.myProp = newValue")]),t._v(",")]),t._v(" "),a("li",[t._v("after deserializing its value read from record in persistent data storage and")]),t._v(" "),a("li",[t._v("when comparing it with another value (applying coercion to either value).")])]),t._v(" "),a("p",[t._v("Coercion is meant to assure that a property's value always complies with the property's declared type. A type's implementation of any other stage should assume a provided value's type. That's why coercion is applied whenever trying to adjust a property's value or when trying to compare it with other values.")]),t._v(" "),a("h3",{attrs:{id:"validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validation","aria-hidden":"true"}},[t._v("#")]),t._v(" Validation")]),t._v(" "),a("p",[t._v("A property's value is tested for complying with defined constraints.")]),t._v(" "),a("h3",{attrs:{id:"comparison"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#comparison","aria-hidden":"true"}},[t._v("#")]),t._v(" Comparison")]),t._v(" "),a("p",[t._v("A value is tested for satisfying some given comparison operation probably involving one or more additional values.")]),t._v(" "),a("h3",{attrs:{id:"chronology-of-stages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chronology-of-stages","aria-hidden":"true"}},[t._v("#")]),t._v(" Chronology of Stages")]),t._v(" "),a("p",[t._v("When interacting with a model's item described stages are passed in different combinations. When you load it from data storage its properties are "),a("em",[t._v("deserialized")]),t._v(" and "),a("em",[t._v("coerced")]),t._v(". After that you can adjust the properties which results in another "),a("em",[t._v("coercion")]),t._v(" of either assigned value. When saving changes to data storage "),a("em",[t._v("validation")]),t._v(" occurs right before "),a("em",[t._v("serializing")]),t._v(" properties' values.")]),t._v(" "),a("h3",{attrs:{id:"stage-related-options"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stage-related-options","aria-hidden":"true"}},[t._v("#")]),t._v(" Stage-Related Options")]),t._v(" "),a("p",[t._v("Properties are processed using separate components each suitable for handling a particular type of values. Those "),a("em",[t._v("type handler")]),t._v(" provide implementations for either stage described before.")]),t._v(" "),a("p",[t._v("Implementations for stages "),a("strong",[t._v("coercion")]),t._v(" and "),a("strong",[t._v("validation")]),t._v(" may be customized using special options in either property's definition. Supported options are described for every type of property below. Badges "),a("Badge",[t._v("coercion")]),t._v(" and "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")]),t._v(" are used there to indicate whether some option is obeyed in either stage of processing a related property.")],1),t._v(" "),a("h2",{attrs:{id:"property-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#property-types","aria-hidden":"true"}},[t._v("#")]),t._v(" Property Types")]),t._v(" "),a("p",[t._v("As described before every property is bound to one out of several supported types. Properties not picking any type explicitly are bound to type "),a("em",[t._v("string")]),t._v(" by default.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[a("code",[t._v("null")]),t._v(" or "),a("code",[t._v("undefined")]),t._v(" are supported by either type of property. They are used to indicate that there is no actual property value.")])]),t._v(" "),a("p",[t._v("The following example defines two properties of type "),a("em",[t._v("string")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The same can be achieved by picking types explicitly like this:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("In property definitions the "),a("code",[t._v("type")]),t._v(" option selects a "),a("em",[t._v("type handler")]),t._v(" which is affecting the "),a("a",{attrs:{href:"#property-processing"}},[t._v("property's processing as described before")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"strings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#strings","aria-hidden":"true"}},[t._v("#")]),t._v(" Strings")]),t._v(" "),a("p",[t._v("Strings are declared with "),a("code",[t._v('type: "string"')]),t._v(" or by omitting the declaration property "),a("code",[t._v("type")]),t._v(" altogether.")]),t._v(" "),a("p",[t._v("Properties of type "),a("code",[t._v("string")]),t._v(" are capable of holding a sequence of arbitrary characters. The following options customize the way either string property gets processed and validated.")]),t._v(" "),a("h4",{attrs:{id:"trim-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trim-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" trim "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This boolean declares whether values should be trimmed implicitly or not. By trimming a string value all leading and trailing whitespace gets removed.")]),t._v(" "),a("h4",{attrs:{id:"reducespace-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reducespace-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" reduceSpace "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This boolean option declares whether whitespace should be normalized or not. Normalization refers to replacing all sequences of multiple whitespaces by a single SPC character.")]),t._v(" "),a("h4",{attrs:{id:"uppercase-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uppercase-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" upperCase "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This boolean option demands to replace any lowercase letter in value by its uppercase counterpart.")]),t._v(" "),a("h4",{attrs:{id:"lowercase-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lowercase-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" lowerCase "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This boolean option demands to replace any uppercase letter in value by its lowercase counterpart.")]),t._v(" "),a("h4",{attrs:{id:"minlength-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#minlength-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" minLength "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This integer option applies constraint requiring minimum number of characters in a non-null value.")]),t._v(" "),a("h4",{attrs:{id:"maxlength-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maxlength-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" maxLength "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This integer option applies constraint requiring maximum number of characters in a non-null value.")]),t._v(" "),a("h4",{attrs:{id:"pattern-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pattern-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" pattern "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This regular expression applies constraint requiring any non-null value to match this pattern. Provided pattern might be literal regular expression like "),a("code",[t._v("/^some-pattern$/")]),t._v(" or some string containing it, e.g. "),a("code",[t._v('"^some-pattern$"')]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"required-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" required "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean options applies constraint controlling whether this property requires a non-null value or not. When set "),a("code",[t._v("true")]),t._v(" instances of the model mustn't be saved without providing non-null value for this property.")]),t._v(" "),a("h3",{attrs:{id:"numbers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#numbers","aria-hidden":"true"}},[t._v("#")]),t._v(" Numbers")]),t._v(" "),a("p",[t._v("Numbers are declared with "),a("code",[t._v('type: "number"')]),t._v(". Aliases are "),a("code",[t._v('type: "numeric"')]),t._v(", "),a("code",[t._v('type: "decimal"')]),t._v(" or "),a("code",[t._v('type: "float"')]),t._v(".")]),t._v(" "),a("p",[t._v("Properties of type number are capable of holding numeric values with decimal digits.")]),t._v(" "),a("h4",{attrs:{id:"step-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" step "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This numeric value results in snapping numbers to multitudes of this value related to configured minimum value in declaration property "),a("code",[t._v("min")]),t._v(" or to 0 on omitting that declaration property.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("Declaring step size "),a("code",[t._v("1.0")]),t._v(" while having integer minimum value constraint in "),a("code",[t._v("min")]),t._v(" limits values to be integers, though they are still handled as fractional numbers without decimal digits.")])]),t._v(" "),a("h4",{attrs:{id:"min-coercion-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#min-coercion-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" min "),a("Badge",[t._v("coercion")]),t._v(" "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This numeric value applies constraint requiring any non-null value to be greater than this value or equal it.")]),t._v(" "),a("p",[t._v("In coercion this option declares base value of optionally configured step size.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("Declaring "),a("code",[t._v("min: 4.2")]),t._v(" and "),a("code",[t._v("step: 5.3")]),t._v(" results in numeric values snapped to values "),a("code",[t._v("4.2")]),t._v(", "),a("code",[t._v("9.5")]),t._v(", "),a("code",[t._v("14.8")]),t._v(", ...")])]),t._v(" "),a("h4",{attrs:{id:"max-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#max-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" max "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This numeric value applies constraint requiring any non-null value to be less than this value or equal it.")]),t._v(" "),a("h4",{attrs:{id:"required-validation-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-validation-2","aria-hidden":"true"}},[t._v("#")]),t._v(" required "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean applies constraint controlling whether this property requires a non-null value or not. When set "),a("code",[t._v("true")]),t._v(" instances of the model mustn't be saved without providing non-null value for this property.")]),t._v(" "),a("h3",{attrs:{id:"integers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#integers","aria-hidden":"true"}},[t._v("#")]),t._v(" Integers")]),t._v(" "),a("p",[t._v("A separate type handler is provided to particularly handle "),a("em",[t._v("integers")]),t._v(". This type handler is used when declaring a property with "),a("code",[t._v('type: "integer"')]),t._v(".")]),t._v(" "),a("p",[t._v("The type handler provides the same options as the more common type handler for numbers though working with any constraint value limited to integer values as well.")]),t._v(" "),a("h3",{attrs:{id:"booleans"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#booleans","aria-hidden":"true"}},[t._v("#")]),t._v(" Booleans")]),t._v(" "),a("p",[t._v("Booleans are declared with "),a("code",[t._v('type: "boolean"')]),t._v(".")]),t._v(" "),a("p",[t._v("Boolean values are "),a("code",[t._v("true")]),t._v(" and "),a("code",[t._v("false")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"isset-validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#isset-validation","aria-hidden":"true"}},[t._v("#")]),t._v(" isSet "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean option applies constraint requiring any provided value to be "),a("code",[t._v("true")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"required-validation-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-validation-3","aria-hidden":"true"}},[t._v("#")]),t._v(" required "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean option applies constraint controlling whether this property requires a non-null value or not. When set "),a("code",[t._v("true")]),t._v(" instances of the model mustn't be saved without providing non-null value for this property.")]),t._v(" "),a("h3",{attrs:{id:"timestamps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timestamps","aria-hidden":"true"}},[t._v("#")]),t._v(" Timestamps")]),t._v(" "),a("p",[t._v("Timestamps are declared with "),a("code",[t._v('type: "date"')]),t._v(". A supported alias is "),a("code",[t._v('type: "time"')]),t._v(".")]),t._v(" "),a("p",[t._v("Values are represented using instance of Javascript's native class for "),a("code",[t._v("Date")]),t._v(". Due to supported coercion it's possible to assign strings as well using a limited set of formats.")]),t._v(" "),a("h4",{attrs:{id:"time-coercion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-coercion","aria-hidden":"true"}},[t._v("#")]),t._v(" time "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This boolean option results in timestamps being stripped off their time of day information. It must be set "),a("code",[t._v("false")]),t._v(" explicitly to achieve that.")]),t._v(" "),a("h4",{attrs:{id:"step-coercion-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-coercion-2","aria-hidden":"true"}},[t._v("#")]),t._v(" step "),a("Badge",[t._v("coercion")])],1),t._v(" "),a("p",[t._v("This numeric value is a number of milliseconds timestamp values are snapped to. The snapping occurs related to a given minimum timestamp declared in "),a("code",[t._v("min")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"min-coercion-validation-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#min-coercion-validation-2","aria-hidden":"true"}},[t._v("#")]),t._v(" min "),a("Badge",[t._v("coercion")]),t._v(" "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This timestamp applies constraint requiring any value to be greater than this timestamp or equal it.")]),t._v(" "),a("p",[t._v("The value might be given as string complying with a limited set of formats, as a string or numeric value representing number of milliseconds since midnight of January 1st, 1970 or as an instance of Javascript's natively supported class "),a("code",[t._v("Date")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"max-validation-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#max-validation-2","aria-hidden":"true"}},[t._v("#")]),t._v(" max "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This timestamp applies constraint requiring any value to be less than this timestamp or equal it.")]),t._v(" "),a("p",[t._v("The value might be given as string complying with a limited set of formats, as a string or numeric value representing number of milliseconds since midnight of January 1st, 1970 or as an instance of Javascript's natively supported class "),a("code",[t._v("Date")]),t._v(".")]),t._v(" "),a("h4",{attrs:{id:"required-validation-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-validation-4","aria-hidden":"true"}},[t._v("#")]),t._v(" required "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean option applies constraint controlling whether this property requires a non-null value or not. When set "),a("code",[t._v("true")]),t._v(" instances of the model mustn't be saved without providing non-null value for this property.")]),t._v(" "),a("h3",{attrs:{id:"uuids"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uuids","aria-hidden":"true"}},[t._v("#")]),t._v(" UUIDs")]),t._v(" "),a("p",[t._v("UUIDs are supported to track references on associated instances of same or any other model.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("A relational database like MySQL supports referencing instances of same or different model(s). This includes fetching referenced instances or aggregating information on such related instances as part of a query.")]),t._v(" "),a("p",[t._v("In Hitchy Odem - for being an ODM instead of an ORM - relations between instances are not supported implicitly. Instead it is up to your application to handle relations between instances. This property type is meant to save references on other instances you can use to indicate relations and handle those indicators as you like.")])]),t._v(" "),a("p",[t._v("UUIDs are declared with "),a("code",[t._v('type: "uuid"')]),t._v(". A supported alias is "),a("code",[t._v('type: "key"')]),t._v(".")]),t._v(" "),a("p",[t._v("Values are represented as instances of "),a("code",[t._v("Buffer")]),t._v(" containing 16 bytes. Due to supported coercion it's possible to assign strings as well using the common format of UUIDs like "),a("code",[t._v("12345678-1234-1234-1234-123456789012")]),t._v(".")]),t._v(" "),a("p",[t._v("On assigning any incompatible value it is coerced to "),a("code",[t._v("null")]),t._v(". This includes buffers with more or less than 16 bytes.")]),t._v(" "),a("h4",{attrs:{id:"required-validation-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#required-validation-5","aria-hidden":"true"}},[t._v("#")]),t._v(" required "),a("Badge",{attrs:{type:"warning"}},[t._v("validation")])],1),t._v(" "),a("p",[t._v("This boolean option applies constraint controlling whether this property requires a non-null value or not. When set "),a("code",[t._v("true")]),t._v(" instances of the model mustn't be saved without providing a non-null value for this property.")]),t._v(" "),a("h2",{attrs:{id:"life-cycle-events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#life-cycle-events","aria-hidden":"true"}},[t._v("#")]),t._v(" Life Cycle Events")]),t._v(" "),a("p",[t._v("When working with a model's instance it passes several stages of its "),a("em",[t._v("life cycle")]),t._v(". In either stage callbacks can be registered to be invoked as soon as the related "),a("em",[t._v("life cycle event")]),t._v(" occurs.")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("Are there real events?")]),t._v(" "),a("p",[t._v("The term "),a("em",[t._v("event")]),t._v(" has been chosen explicitly to help understanding the intention. However, in difference to other systems using events there is no actual event emitted and dispatched. Instead any callback defined for listening to a "),a("em",[t._v("life cycle event")]),t._v(" is exclusively invoked when available. If there is no callback then there is no "),a("em",[t._v("event")]),t._v(" handling at all.")]),t._v(" "),a("p",[t._v("This is why the section is actually named "),a("strong",[t._v("hooks")]),t._v(" for this term is closer to the real functionality.")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hooks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterSave")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// invoked when instance has been saved in database ...")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This example declares a callback to be invoked after having saved an instance of this model. "),a("code",[t._v("this")]),t._v(" is referring to the affected instance.")]),t._v(" "),a("p",[t._v("See the "),a("a",{attrs:{href:"../api/model#hooks"}},[t._v("Model API regarding hooks")]),t._v(" for a full list of supported life cycle events.")])])}),[],!1,null,null,null);e.default=n.exports}}]);